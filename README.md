# Playlist Sound Metadata Viewer

Foundry VTT v13向けのオーディオメタデータ表示モジュールです。

## 機能

- **プレイリストサイドバーでのホバー表示**: サウンドアイテムにマウスをホバーすると、ID3タグ情報（タイトル、アーティスト、アルバム）をツールチップで表示
- **サウンド設定ダイアログでの詳細表示**: サウンド設定画面でメタデータを詳細表示
- **説明欄への自動転記**: ワンクリックでメタデータを説明欄に転記可能
- **デバッグモード**: トラブルシューティング用の詳細ログ出力機能

## 対応バージョン

- Foundry VTT v13以降（ApplicationV2対応）

## インストール

1. モジュールディレクトリに配置
2. Foundry VTTを再起動
3. ゲームワールド内でモジュールを有効化

## 使用方法

### プレイリストサイドバー

1. プレイリストサイドバーを開く
2. サウンドアイテムにマウスをホバー
3. メタデータがツールチップで表示されます

### サウンド設定ダイアログ

1. サウンドアイテムを右クリックして「設定」を選択
2. 「オーディオメタデータ」セクションが表示されます
3. 「説明欄にメタ情報を転記」ボタンで説明欄に情報をコピーできます

### デバッグモード

トラブルシューティングが必要な場合：

1. ゲーム設定 → モジュール設定 → Playlist Sound Metadata Viewer
2. 「デバッグログを出力する」をONにする
3. F12キーでブラウザのコンソールを開く
4. `[Metadata Viewer]`で始まる詳細なログが表示されます

## 技術仕様

- **依存ライブラリ**: jsmediatags (BSD-3-Clause)
- **対応フォーマット**: MP3のID3タグ
- **権限**: GM権限を持つユーザーのみ動作
- **アーキテクチャ**: ES Modules使用

## ファイル構成

```
playlist-sound-metadata-viewer/
├── lib/
│   └── jsmediatags.min.js (ダミーファイル)
├── scripts/
│   ├── module.js (メインエントリーポイント)
│   ├── settings.js (設定登録)
│   ├── utils.js (ユーティリティ関数)
│   ├── metadata-reader.js (メタデータ読み取り)
│   └── hooks.js (フック処理)
├── module.json
├── README.md
├── CHANGELOG.md
└── LICENSE
```

## 制限事項

- HTTPで配信されているリモートファイルには対応していません
- ID3タグが存在しないファイルでは情報が表示されません

## トラブルシューティング

### メタデータが表示されない

1. デバッグモードを有効にする
2. コンソールログを確認
3. 以下を確認：
   - GMとしてログインしているか
   - 音声ファイルがローカルパスか
   - ID3タグが埋め込まれているか

### ライブラリ読み込みエラー

- CDNからjsmediatagsが読み込めない場合、インターネット接続を確認してください

## ライセンス

MIT License

## 変更履歴

詳細は [CHANGELOG.md](CHANGELOG.md) を参照してください。

## クレジット

- **jsmediatags**: https://github.com/aadsm/jsmediatags
